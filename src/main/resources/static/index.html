<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <title>My Application</title>

    <script>

        var timeStamp_g = new Date().getTime();

        attachScripts = (src, isModule, timestamp) => {
            var script = document.createElement('script');
            script.setAttribute('src',src + '?version=' + timestamp);
            if (isModule) {
                script.setAttribute('type', 'module');
            } else {
                script.setAttribute('nomodule', '');
            }
            document.head.appendChild(script);
        }

        attachScripts("https://vwr-navigator.herokuapp.com/build/vwr-navigator.esm.js", true, timeStamp_g);
        attachScripts("https://vwr-navigator.herokuapp.com/build/vwr-navigator.js", false, timeStamp_g);
        attachScripts("https://stencil-example.herokuapp.com/build/stencil-example.esm.js", true, timeStamp_g);
        attachScripts("https://stencil-example.herokuapp.com/build/stencil-example.js", false, timeStamp_g);

        attachEvents = () => {
            const filterDOM = document.querySelector("filter-component");
            filterDOM.addEventListener("filterChange", event => {
              console.log(event.detail);
              applyPieChartFilter(event.detail);
              applyColumnChartFilter(event.detail);
              applyTableFilter(event.detail)
            });
        }

        applyPieChartFilter = (filter) => {
            const pieChartDOM = document.querySelector("pie-chart-example");
            pieChartDOM.setAttribute('country', filter.country);
            pieChartDOM.setAttribute('year', filter.year);
        }

        applyColumnChartFilter = (filter) => {
            const columnChartDOM = document.querySelector("column-chart-example");
            columnChartDOM.setAttribute('country', filter.country);
            columnChartDOM.setAttribute('year', filter.year);
        }

        applyTableFilter = (filter) => {
            const tableDOM = document.querySelector("table-example");
            tableDOM.setAttribute('country', filter.country);
            tableDOM.setAttribute('year', filter.year);
        }
	</script>
    <style>
        .header {
            display: table;
            margin: auto;
            margin-top: 100px;
            color: red;
        }
    </style>
</head>

<body onload="attachEvents();">
 <waiting-room-navigator></waiting-room-navigator>

 <h2>Olympic Dashboard</h2>
 <div style="max-width: 50%;">
     <filter-component></filter-component>
 </div>
 <div style="display: flex;">
			<span>
				<column-chart-example></column-chart-example>
			</span>
     <span>
				<pie-chart-example></pie-chart-example>
			</span>
 </div>
 <div style="display: flex;">
			<span style="max-height: 550px; overflow: auto;">
				<table-example></table-example>
			</span>
 </div>


</body>
</html>
